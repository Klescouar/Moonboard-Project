{"ast":null,"code":"var _jsxFileName = \"/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Admin/RemoveArticle.js\";\nimport React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Query, Mutation } from 'react-apollo';\nimport { DELETE_ARTICLE, GET_ARTICLES } from '../../queries';\n\nvar handleDelete = function handleDelete(deleteArticle) {\n  var confirmDelete = window.confirm('Are you sure you want to delete this article?');\n\n  if (confirmDelete) {\n    deleteArticle().then(function (_ref) {\n      var data = _ref.data;\n      console.log(data);\n    });\n  }\n};\n\nvar RemoveArticle = function RemoveArticle(_ref2) {\n  var username = _ref2.username;\n  return React.createElement(Query, {\n    query: GET_ARTICLES,\n    variables: {\n      username: username\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, function (_ref3) {\n    var data = _ref3.data,\n        loading = _ref3.loading,\n        error = _ref3.error;\n    if (loading) return React.createElement(CircularProgress, {\n      className: \"Spinner\",\n      size: 50,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27\n      },\n      __self: this\n    });\n    if (error) return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, \"Error\");\n    return React.createElement(\"div\", {\n      className: \"RemoveArticle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, !data.getArticles.length && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, \"You have not added any articles yet\")), React.createElement(\"div\", {\n      className: \"RemoveArticle__Articles\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, data.getArticles.map(function (article) {\n      return React.createElement(\"div\", {\n        className: \"RemoveArticle__Articles__Article\",\n        key: article._id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, React.createElement(Mutation, {\n        mutation: DELETE_ARTICLE,\n        variables: {\n          _id: article._id\n        },\n        refetchQueries: function refetchQueries() {\n          return [{\n            query: GET_ARTICLES\n          }];\n        },\n        update: function update(cache, _ref4) {\n          var deleteArticle = _ref4.data.deleteArticle;\n\n          var _cache$readQuery = cache.readQuery({\n            query: GET_ARTICLES,\n            variables: {\n              username: username\n            }\n          }),\n              getArticles = _cache$readQuery.getArticles;\n\n          cache.writeQuery({\n            query: GET_ARTICLES,\n            variables: {\n              username: username\n            },\n            data: {\n              getArticles: getArticles.filter(function (article) {\n                return article._id !== deleteArticle._id;\n              })\n            }\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, function (deleteArticle) {\n        var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return React.createElement(Card, {\n          className: \"RemoveArticle__Articles__Article__Card\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          className: \"RemoveArticle__Articles__Article__Card__Image\",\n          image: require(\"../../assets/images/\".concat(article.image)),\n          title: \"Contemplative Reptile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), React.createElement(CardContent, {\n          className: \"RemoveArticle__Articles__Article__Card__Content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          gutterBottom: true,\n          variant: \"headline\",\n          component: \"h2\",\n          className: \"RemoveArticle__Articles__Article__Card__Content__Title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, article.title), React.createElement(Typography, {\n          component: \"p\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, article.description)), React.createElement(CardActions, {\n          className: \"RemoveArticle__Articles__Article__Card__Action\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(Button, {\n          size: \"small\",\n          onClick: function onClick() {\n            return handleDelete(deleteArticle);\n          },\n          color: \"primary\",\n          variant: \"outlined\",\n          className: \"RemoveArticle__Articles__Article__Card__Action__Button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, attrs.loading ? 'deleting...' : 'DELETE')));\n      }));\n    })));\n  });\n};\n\nexport default RemoveArticle;","map":{"version":3,"sources":["/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Admin/RemoveArticle.js"],"names":["React","Card","CardActions","CardContent","CardMedia","Button","Typography","CircularProgress","Query","Mutation","DELETE_ARTICLE","GET_ARTICLES","handleDelete","deleteArticle","confirmDelete","window","confirm","then","data","console","log","RemoveArticle","username","loading","error","getArticles","length","map","article","_id","query","cache","readQuery","variables","writeQuery","filter","attrs","require","image","title","description"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { Query, Mutation } from 'react-apollo';\nimport { DELETE_ARTICLE, GET_ARTICLES } from '../../queries';\n\nconst handleDelete = deleteArticle => {\n  const confirmDelete = window.confirm(\n    'Are you sure you want to delete this article?'\n  );\n  if (confirmDelete) {\n    deleteArticle().then(({ data }) => {\n      console.log(data);\n    });\n  }\n};\n\nconst RemoveArticle = ({ username }) => (\n  <Query query={GET_ARTICLES} variables={{ username }}>\n    {({ data, loading, error }) => {\n      if (loading) return <CircularProgress className=\"Spinner\" size={50} />;\n      if (error) return <div>Error</div>;\n      return (\n        <div className=\"RemoveArticle\">\n          {!data.getArticles.length && (\n            <p>\n              <strong>You have not added any articles yet</strong>\n            </p>\n          )}\n          <div className=\"RemoveArticle__Articles\">\n            {data.getArticles.map(article => (\n              <div\n                className=\"RemoveArticle__Articles__Article\"\n                key={article._id}\n              >\n                <Mutation\n                  mutation={DELETE_ARTICLE}\n                  variables={{ _id: article._id }}\n                  refetchQueries={() => [{ query: GET_ARTICLES }]}\n                  update={(cache, { data: { deleteArticle } }) => {\n                    const { getArticles } = cache.readQuery({\n                      query: GET_ARTICLES,\n                      variables: { username }\n                    });\n\n                    cache.writeQuery({\n                      query: GET_ARTICLES,\n                      variables: { username },\n                      data: {\n                        getArticles: getArticles.filter(\n                          article => article._id !== deleteArticle._id\n                        )\n                      }\n                    });\n                  }}\n                >\n                  {(deleteArticle, attrs = {}) => {\n                    return (\n                      <Card className=\"RemoveArticle__Articles__Article__Card\">\n                        <CardMedia\n                          className=\"RemoveArticle__Articles__Article__Card__Image\"\n                          image={require(`../../assets/images/${\n                            article.image\n                          }`)}\n                          title=\"Contemplative Reptile\"\n                        />\n                        <CardContent className=\"RemoveArticle__Articles__Article__Card__Content\">\n                          <Typography\n                            gutterBottom\n                            variant=\"headline\"\n                            component=\"h2\"\n                            className=\"RemoveArticle__Articles__Article__Card__Content__Title\"\n                          >\n                            {article.title}\n                          </Typography>\n                          <Typography component=\"p\">\n                            {article.description}\n                          </Typography>\n                        </CardContent>\n                        <CardActions className=\"RemoveArticle__Articles__Article__Card__Action\">\n                          <Button\n                            size=\"small\"\n                            onClick={() => handleDelete(deleteArticle)}\n                            color=\"primary\"\n                            variant=\"outlined\"\n                            className=\"RemoveArticle__Articles__Article__Card__Action__Button\"\n                          >\n                            {attrs.loading ? 'deleting...' : 'DELETE'}\n                          </Button>\n                        </CardActions>\n                      </Card>\n                    );\n                  }}\n                </Mutation>\n              </div>\n            ))}\n          </div>\n        </div>\n      );\n    }}\n  </Query>\n);\n\nexport default RemoveArticle;\n"]},"metadata":{},"sourceType":"module"}