{"ast":null,"code":"import _regeneratorRuntime from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Auth/Signup.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { Mutation } from 'react-apollo';\nimport Error from '../Error';\nimport { SIGNUP_USER } from '../../queries';\nvar initialState = {\n  username: '',\n  email: '',\n  password: '',\n  passwordConfirmation: ''\n};\n\nvar Signup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signup, _React$Component);\n\n  function Signup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, initialState);\n\n    _this.clearState = function () {\n      _this.setState(_objectSpread({}, initialState));\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event, signupUser) {\n      event.preventDefault();\n      signupUser().then(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(_ref) {\n          var data;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  data = _ref.data;\n                  localStorage.setItem('token', data.signupUser.token);\n                  _context.next = 4;\n                  return _this.props.refetch();\n\n                case 4:\n                  _this.clearState();\n\n                  _this.props.history.push('/');\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    };\n\n    _this.validateForm = function () {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          password = _this$state.password,\n          passwordConfirmation = _this$state.passwordConfirmation;\n      var isInvalid = !username || !email || !password || password !== passwordConfirmation;\n      return isInvalid;\n    };\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          passwordConfirmation = _this$state2.passwordConfirmation;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Signup\"), React.createElement(Mutation, {\n        mutation: SIGNUP_USER,\n        variables: {\n          username: username,\n          email: email,\n          password: password\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, function (signupUser, _ref3) {\n        var data = _ref3.data,\n            loading = _ref3.loading,\n            error = _ref3.error;\n        return React.createElement(\"form\", {\n          className: \"form\",\n          onSubmit: function onSubmit(event) {\n            return _this2.handleSubmit(event, signupUser);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Username\",\n          value: username,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Email Address\",\n          value: email,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          value: password,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          type: \"password\",\n          name: \"passwordConfirmation\",\n          placeholder: \"Confirm Password\",\n          value: passwordConfirmation,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"submit\",\n          disabled: loading || _this2.validateForm(),\n          className: \"button-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"Submit\"), error && React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return Signup;\n}(React.Component);\n\nexport default withRouter(Signup);","map":{"version":3,"sources":["/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Auth/Signup.js"],"names":["React","withRouter","Mutation","Error","SIGNUP_USER","initialState","username","email","password","passwordConfirmation","Signup","state","clearState","setState","handleChange","event","target","name","value","handleSubmit","signupUser","preventDefault","then","data","localStorage","setItem","token","props","refetch","history","push","validateForm","isInvalid","loading","error","Component"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,WAAT,QAA4B,eAA5B;AAEA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,EADS;AAEnBC,EAAAA,KAAK,EAAE,EAFY;AAGnBC,EAAAA,QAAQ,EAAE,EAHS;AAInBC,EAAAA,oBAAoB,EAAE;AAJH,CAArB;;IAOMC,M;;;;;;;;;;;;;;;;;UACJC,K,qBAAaN,Y;;UAEbO,U,GAAa,YAAM;AACjB,YAAKC,QAAL,mBAAmBR,YAAnB;AACD,K;;UAEDS,Y,GAAe,UAAAC,KAAK,EAAI;AAAA,0BACEA,KAAK,CAACC,MADR;AAAA,UACdC,IADc,iBACdA,IADc;AAAA,UACRC,KADQ,iBACRA,KADQ;;AAEtB,YAAKL,QAAL,qBAAiBI,IAAjB,EAAwBC,KAAxB;AACD,K;;UAEDC,Y,GAAe,UAACJ,KAAD,EAAQK,UAAR,EAAuB;AACpCL,MAAAA,KAAK,CAACM,cAAN;AACAD,MAAAA,UAAU,GAAGE,IAAb;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,kBAAAA,IAAT,QAASA,IAAT;AAChBC,kBAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,IAAI,CAACH,UAAL,CAAgBM,KAA9C;AADgB;AAAA,yBAEV,MAAKC,KAAL,CAAWC,OAAX,EAFU;;AAAA;AAGhB,wBAAKhB,UAAL;;AACA,wBAAKe,KAAL,CAAWE,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;;AAJgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAlB;;AAAA;AAAA;AAAA;AAAA;AAMD,K;;UAEDC,Y,GAAe,YAAM;AAAA,wBACyC,MAAKpB,KAD9C;AAAA,UACXL,QADW,eACXA,QADW;AAAA,UACDC,KADC,eACDA,KADC;AAAA,UACMC,QADN,eACMA,QADN;AAAA,UACgBC,oBADhB,eACgBA,oBADhB;AAEnB,UAAMuB,SAAS,GACb,CAAC1B,QAAD,IAAa,CAACC,KAAd,IAAuB,CAACC,QAAxB,IAAoCA,QAAQ,KAAKC,oBADnD;AAEA,aAAOuB,SAAP;AACD,K;;;;;;;6BAEQ;AAAA;;AAAA,yBACqD,KAAKrB,KAD1D;AAAA,UACCL,QADD,gBACCA,QADD;AAAA,UACWC,KADX,gBACWA,KADX;AAAA,UACkBC,QADlB,gBACkBA,QADlB;AAAA,UAC4BC,oBAD5B,gBAC4BA,oBAD5B;AAGP,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE,oBAAC,QAAD;AACE,QAAA,QAAQ,EAAEL,WADZ;AAEE,QAAA,SAAS,EAAE;AAAEE,UAAAA,QAAQ,EAARA,QAAF;AAAYC,UAAAA,KAAK,EAALA,KAAZ;AAAmBC,UAAAA,QAAQ,EAARA;AAAnB,SAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIG,UAACY,UAAD,SAA0C;AAAA,YAA3BG,IAA2B,SAA3BA,IAA2B;AAAA,YAArBU,OAAqB,SAArBA,OAAqB;AAAA,YAAZC,KAAY,SAAZA,KAAY;AACzC,eACE;AACE,UAAA,SAAS,EAAC,MADZ;AAEE,UAAA,QAAQ,EAAE,kBAAAnB,KAAK;AAAA,mBAAI,MAAI,CAACI,YAAL,CAAkBJ,KAAlB,EAAyBK,UAAzB,CAAJ;AAAA,WAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAIE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,IAAI,EAAC,UAFP;AAGE,UAAA,WAAW,EAAC,UAHd;AAIE,UAAA,KAAK,EAAEd,QAJT;AAKE,UAAA,QAAQ,EAAE,MAAI,CAACQ,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF,EAWE;AACE,UAAA,IAAI,EAAC,OADP;AAEE,UAAA,IAAI,EAAC,OAFP;AAGE,UAAA,WAAW,EAAC,eAHd;AAIE,UAAA,KAAK,EAAEP,KAJT;AAKE,UAAA,QAAQ,EAAE,MAAI,CAACO,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAXF,EAkBE;AACE,UAAA,IAAI,EAAC,UADP;AAEE,UAAA,IAAI,EAAC,UAFP;AAGE,UAAA,WAAW,EAAC,UAHd;AAIE,UAAA,KAAK,EAAEN,QAJT;AAKE,UAAA,QAAQ,EAAE,MAAI,CAACM,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAlBF,EAyBE;AACE,UAAA,IAAI,EAAC,UADP;AAEE,UAAA,IAAI,EAAC,sBAFP;AAGE,UAAA,WAAW,EAAC,kBAHd;AAIE,UAAA,KAAK,EAAEL,oBAJT;AAKE,UAAA,QAAQ,EAAE,MAAI,CAACK,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAzBF,EAgCE;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,QAAQ,EAAEmB,OAAO,IAAI,MAAI,CAACF,YAAL,EAFvB;AAGE,UAAA,SAAS,EAAC,gBAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhCF,EAuCGG,KAAK,IAAI,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAvCZ,CADF;AA2CD,OAhDH,CAFF,CADF;AAuDD;;;;EAvFkBlC,KAAK,CAACmC,S;;AA0F3B,eAAelC,UAAU,CAACS,MAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { Mutation } from 'react-apollo';\nimport Error from '../Error';\nimport { SIGNUP_USER } from '../../queries';\n\nconst initialState = {\n  username: '',\n  email: '',\n  password: '',\n  passwordConfirmation: ''\n};\n\nclass Signup extends React.Component {\n  state = { ...initialState };\n\n  clearState = () => {\n    this.setState({ ...initialState });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event, signupUser) => {\n    event.preventDefault();\n    signupUser().then(async ({ data }) => {\n      localStorage.setItem('token', data.signupUser.token);\n      await this.props.refetch();\n      this.clearState();\n      this.props.history.push('/');\n    });\n  };\n\n  validateForm = () => {\n    const { username, email, password, passwordConfirmation } = this.state;\n    const isInvalid =\n      !username || !email || !password || password !== passwordConfirmation;\n    return isInvalid;\n  };\n\n  render() {\n    const { username, email, password, passwordConfirmation } = this.state;\n\n    return (\n      <div className=\"App\">\n        <h2 className=\"App\">Signup</h2>\n        <Mutation\n          mutation={SIGNUP_USER}\n          variables={{ username, email, password }}\n        >\n          {(signupUser, { data, loading, error }) => {\n            return (\n              <form\n                className=\"form\"\n                onSubmit={event => this.handleSubmit(event, signupUser)}\n              >\n                <input\n                  type=\"text\"\n                  name=\"username\"\n                  placeholder=\"Username\"\n                  value={username}\n                  onChange={this.handleChange}\n                />\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  placeholder=\"Email Address\"\n                  value={email}\n                  onChange={this.handleChange}\n                />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  value={password}\n                  onChange={this.handleChange}\n                />\n                <input\n                  type=\"password\"\n                  name=\"passwordConfirmation\"\n                  placeholder=\"Confirm Password\"\n                  value={passwordConfirmation}\n                  onChange={this.handleChange}\n                />\n                <button\n                  type=\"submit\"\n                  disabled={loading || this.validateForm()}\n                  className=\"button-primary\"\n                >\n                  Submit\n                </button>\n                {error && <Error error={error} />}\n              </form>\n            );\n          }}\n        </Mutation>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Signup);\n"]},"metadata":{},"sourceType":"module"}