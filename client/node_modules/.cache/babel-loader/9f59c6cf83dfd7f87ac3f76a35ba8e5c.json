{"ast":null,"code":"import _regeneratorRuntime from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Auth/Signin.js\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport { Mutation } from 'react-apollo';\nimport Error from '../Error';\nimport { SIGNIN_USER } from '../../queries';\nvar initialState = {\n  username: '',\n  password: ''\n};\n\nvar Signin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Signin, _React$Component);\n\n  function Signin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _objectSpread({}, initialState);\n\n    _this.clearState = function () {\n      _this.setState(_objectSpread({}, initialState));\n    };\n\n    _this.handleChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleSubmit = function (event, signinUser) {\n      event.preventDefault();\n      signinUser().then(\n      /*#__PURE__*/\n      function () {\n        var _ref2 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(_ref) {\n          var data;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  data = _ref.data;\n                  localStorage.setItem('token', data.signinUser.token);\n                  _context.next = 4;\n                  return _this.props.refetch();\n\n                case 4:\n                  _this.clearState();\n\n                  _this.props.history.push('/admin/backoffice');\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    };\n\n    _this.validateForm = function () {\n      var _this$state = _this.state,\n          username = _this$state.username,\n          password = _this$state.password;\n      var isInvalid = !username || !password;\n      return isInvalid;\n    };\n\n    return _this;\n  }\n\n  _createClass(Signin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password;\n      return React.createElement(\"div\", {\n        className: \"Signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"Signin__Title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Signin\"), React.createElement(Mutation, {\n        mutation: SIGNIN_USER,\n        variables: {\n          username: username,\n          password: password\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, function (signinUser, _ref3) {\n        var data = _ref3.data,\n            loading = _ref3.loading,\n            error = _ref3.error;\n        return React.createElement(\"form\", {\n          className: \"Signin__Form\",\n          onSubmit: function onSubmit(event) {\n            return _this2.handleSubmit(event, signinUser);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(TextField, {\n          required: true,\n          name: \"username\",\n          placeholder: \"Username\",\n          id: \"outlined-required\",\n          label: \"Required\",\n          defaultValue: \"Hello World\",\n          margin: \"normal\",\n          variant: \"outlined\",\n          value: username,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }), React.createElement(TextField, {\n          required: true,\n          id: \"outlined-required\",\n          label: \"Required\",\n          defaultValue: \"Hello World\",\n          margin: \"normal\",\n          variant: \"outlined\",\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          value: password,\n          onChange: _this2.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"submit\",\n          disabled: loading || _this2.validateForm(),\n          className: \"button-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \"Submit\"), error && React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }));\n      }));\n    }\n  }]);\n\n  return Signin;\n}(React.Component);\n\nexport default withRouter(Signin);","map":{"version":3,"sources":["/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Auth/Signin.js"],"names":["React","withRouter","TextField","Mutation","Error","SIGNIN_USER","initialState","username","password","Signin","state","clearState","setState","handleChange","event","target","name","value","handleSubmit","signinUser","preventDefault","then","data","localStorage","setItem","token","props","refetch","history","push","validateForm","isInvalid","loading","error","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport TextField from '@material-ui/core/TextField';\nimport { Mutation } from 'react-apollo';\nimport Error from '../Error';\nimport { SIGNIN_USER } from '../../queries';\n\nconst initialState = {\n  username: '',\n  password: ''\n};\n\nclass Signin extends React.Component {\n  state = { ...initialState };\n\n  clearState = () => {\n    this.setState({ ...initialState });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event, signinUser) => {\n    event.preventDefault();\n    signinUser().then(async ({ data }) => {\n      localStorage.setItem('token', data.signinUser.token);\n      await this.props.refetch();\n      this.clearState();\n      this.props.history.push('/admin/backoffice');\n    });\n  };\n\n  validateForm = () => {\n    const { username, password } = this.state;\n    const isInvalid = !username || !password;\n    return isInvalid;\n  };\n\n  render() {\n    const { username, password } = this.state;\n\n    return (\n      <div className=\"Signin\">\n        <h2 className=\"Signin__Title\">Signin</h2>\n        <Mutation mutation={SIGNIN_USER} variables={{ username, password }}>\n          {(signinUser, { data, loading, error }) => {\n            return (\n              <form\n                className=\"Signin__Form\"\n                onSubmit={event => this.handleSubmit(event, signinUser)}\n              >\n                <TextField\n                  required\n                  name=\"username\"\n                  placeholder=\"Username\"\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue=\"Hello World\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  value={username}\n                  onChange={this.handleChange}\n                />\n                <TextField\n                  required\n                  id=\"outlined-required\"\n                  label=\"Required\"\n                  defaultValue=\"Hello World\"\n                  margin=\"normal\"\n                  variant=\"outlined\"\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  value={password}\n                  onChange={this.handleChange}\n                />\n\n                <button\n                  type=\"submit\"\n                  disabled={loading || this.validateForm()}\n                  className=\"button-primary\"\n                >\n                  Submit\n                </button>\n                {error && <Error error={error} />}\n              </form>\n            );\n          }}\n        </Mutation>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Signin);\n"]},"metadata":{},"sourceType":"module"}