{"ast":null,"code":"import _classCallCheck from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/poncho/Documents/PROJET/moonboard-project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Admin/HandleArticle.js\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport RemoveArticle from './RemoveArticle';\nimport Button from '@material-ui/core/Button';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport { Query, Mutation } from 'react-apollo';\nimport { GET_CHAPTERS, ADD_CHAPTER } from '../../queries';\n\nvar HandleArticle =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HandleArticle, _Component);\n\n  function HandleArticle() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, HandleArticle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HandleArticle)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      openSuccessSnackBar: false,\n      openErrorSnackBar: false,\n      openDialog: false,\n      deleteArticle: {}\n    };\n\n    _this.handleDelete = function () {\n      _this.state.deleteArticle().then(function () {\n        _this.setState({\n          openSuccessSnackBar: true,\n          openDialog: false\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            openSuccessSnackBar: false\n          });\n        }, 3000);\n      }).catch(function () {\n        _this.setState({\n          openErrorSnackBar: true,\n          openDialog: false\n        });\n\n        setTimeout(function () {\n          _this.setState({\n            openErrorSnackBar: false\n          });\n        }, 3000);\n      });\n    };\n\n    _this.handleClose = function (deleteArticle) {\n      _this.setState({\n        openDialog: false\n      });\n    };\n\n    _this.handleDialog = function (deleteArticle) {\n      _this.setState({\n        openDialog: true,\n        deleteArticle: deleteArticle\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(HandleArticle, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Query, {\n        query: GET_CHAPTERS,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, function (_ref) {\n        var loading = _ref.loading,\n            error = _ref.error,\n            data = _ref.data;\n        if (loading) return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"Loading...\");\n        if (error) return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"Error :(\");\n        return React.createElement(\"div\", {\n          className: \"HandleArticle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, data.getChapters.sort(function (a, b) {\n          return a.number > b.number;\n        }).map(function (_ref2) {\n          var _id = _ref2._id,\n              number = _ref2.number;\n          return React.createElement(\"div\", {\n            className: \"HandleArticle__Chapter\",\n            key: number,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }, React.createElement(\"h3\", {\n            className: \"HandleArticle__Chapter__Title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, \"Chapite \", number), React.createElement(RemoveArticle, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }), React.createElement(NavLink, {\n            className: \"HandleArticle__Chapter__AddArticle\",\n            to: \"/admin/backoffice/addArticle/chapter/\".concat(number),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, \"ADD AN ARTICLE\"));\n        }), React.createElement(Mutation, {\n          mutation: ADD_CHAPTER,\n          update: function update(cache, _ref3) {\n            var data = _ref3.data;\n            var chapters = cache.readQuery({\n              query: GET_CHAPTERS\n            }).getChapters;\n            cache.writeQuery({\n              query: GET_CHAPTERS,\n              data: {\n                getChapters: chapters.concat([data.addChapter])\n              }\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, function (addChapter, _ref4) {\n          var loading = _ref4.loading,\n              error = _ref4.error;\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, React.createElement(\"form\", {\n            className: \"HandleArticle__AddChapter\",\n            onSubmit: function onSubmit(e) {\n              e.preventDefault();\n              addChapter({\n                variables: {\n                  number: data.getChapters.length + 1\n                }\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          }, React.createElement(Button, {\n            className: \"HandleArticle__AddChapter__Button\",\n            variant: \"outlined\",\n            type: \"submit\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          }, loading ? 'Loading...' : 'Add a chapter')), error && React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }, \"Error :( Please try again\"));\n        }));\n      });\n    }\n  }]);\n\n  return HandleArticle;\n}(Component);\n\nexport default withMobileDialog()(HandleArticle);","map":{"version":3,"sources":["/home/poncho/Documents/PROJET/moonboard-project/client/src/components/Admin/HandleArticle.js"],"names":["React","Component","NavLink","RemoveArticle","Button","withMobileDialog","Query","Mutation","GET_CHAPTERS","ADD_CHAPTER","HandleArticle","state","openSuccessSnackBar","openErrorSnackBar","openDialog","deleteArticle","handleDelete","then","setState","setTimeout","catch","handleClose","handleDialog","loading","error","data","getChapters","sort","a","b","number","map","_id","cache","chapters","readQuery","query","writeQuery","concat","addChapter","e","preventDefault","variables","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport RemoveArticle from './RemoveArticle';\nimport Button from '@material-ui/core/Button';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\n\nimport { Query, Mutation } from 'react-apollo';\nimport { GET_CHAPTERS, ADD_CHAPTER } from '../../queries';\n\nclass HandleArticle extends Component {\n  state = {\n    openSuccessSnackBar: false,\n    openErrorSnackBar: false,\n    openDialog: false,\n    deleteArticle: {}\n  };\n\n  handleDelete = () => {\n    this.state\n      .deleteArticle()\n      .then(() => {\n        this.setState({\n          openSuccessSnackBar: true,\n          openDialog: false\n        });\n        setTimeout(() => {\n          this.setState({\n            openSuccessSnackBar: false\n          });\n        }, 3000);\n      })\n      .catch(() => {\n        this.setState({\n          openErrorSnackBar: true,\n          openDialog: false\n        });\n        setTimeout(() => {\n          this.setState({\n            openErrorSnackBar: false\n          });\n        }, 3000);\n      });\n  };\n\n  handleClose = deleteArticle => {\n    this.setState({ openDialog: false });\n  };\n\n  handleDialog = deleteArticle => {\n    this.setState({\n      openDialog: true,\n      deleteArticle: deleteArticle\n    });\n  };\n\n  render() {\n    return (\n      <Query query={GET_CHAPTERS}>\n        {({ loading, error, data }) => {\n          if (loading) return <p>Loading...</p>;\n          if (error) return <p>Error :(</p>;\n          return (\n            <div className=\"HandleArticle\">\n              {data.getChapters\n                .sort((a, b) => a.number > b.number)\n                .map(({ _id, number }) => {\n                  return (\n                    <div className=\"HandleArticle__Chapter\" key={number}>\n                      <h3 className=\"HandleArticle__Chapter__Title\">\n                        Chapite {number}\n                      </h3>\n                      <RemoveArticle />\n                      <NavLink\n                        className=\"HandleArticle__Chapter__AddArticle\"\n                        to={`/admin/backoffice/addArticle/chapter/${number}`}\n                      >\n                        ADD AN ARTICLE\n                      </NavLink>\n                    </div>\n                  );\n                })}\n              <Mutation\n                mutation={ADD_CHAPTER}\n                update={(cache, { data }) => {\n                  const chapters = cache.readQuery({\n                    query: GET_CHAPTERS\n                  }).getChapters;\n                  cache.writeQuery({\n                    query: GET_CHAPTERS,\n                    data: {\n                      getChapters: chapters.concat([data.addChapter])\n                    }\n                  });\n                }}\n              >\n                {(addChapter, { loading, error }) => (\n                  <div>\n                    <form\n                      className=\"HandleArticle__AddChapter\"\n                      onSubmit={e => {\n                        e.preventDefault();\n                        addChapter({\n                          variables: { number: data.getChapters.length + 1 }\n                        });\n                      }}\n                    >\n                      <Button\n                        className=\"HandleArticle__AddChapter__Button\"\n                        variant=\"outlined\"\n                        type=\"submit\"\n                      >\n                        {loading ? 'Loading...' : 'Add a chapter'}\n                      </Button>\n                    </form>\n                    {error && <p>Error :( Please try again</p>}\n                  </div>\n                )}\n              </Mutation>\n            </div>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default withMobileDialog()(HandleArticle);\n"]},"metadata":{},"sourceType":"module"}